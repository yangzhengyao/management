(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68470e94"],{"11e9":function(e,t,a){var n=a("52a7"),s=a("4630"),o=a("6821"),r=a("6a99"),l=a("69a8"),c=a("c69a"),i=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?i:function(e,t){if(e=o(e),t=r(t,!0),c)try{return i(e,t)}catch(a){}if(l(e,t))return s(!n.f.call(e,t),e[t])}},"1fb3":function(e,t,a){},"454f":function(e,t,a){a("46a7");var n=a("584a").Object;e.exports=function(e,t,a){return n.defineProperty(e,t,a)}},"46a7":function(e,t,a){var n=a("63b6");n(n.S+n.F*!a("8e60"),"Object",{defineProperty:a("d9f6").f})},"85f2":function(e,t,a){e.exports=a("454f")},"8e6e":function(e,t,a){var n=a("5ca1"),s=a("990b"),o=a("6821"),r=a("11e9"),l=a("f1ae");n(n.S,"Object",{getOwnPropertyDescriptors:function(e){var t,a,n=o(e),c=r.f,i=s(n),u={},p=0;while(i.length>p)a=c(n,t=i[p++]),void 0!==a&&l(u,t,a);return u}})},9093:function(e,t,a){var n=a("ce10"),s=a("e11e").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,s)}},"990b":function(e,t,a){var n=a("9093"),s=a("2621"),o=a("cb7c"),r=a("7726").Reflect;e.exports=r&&r.ownKeys||function(e){var t=n.f(o(e)),a=s.f;return a?t.concat(a(e)):t}},a484:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"CommentCheck"},[a("el-container",[a("el-header",[a("div",{staticClass:"header1"},[a("span",[e._v("通过状态")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:function(t){return e.getCommentsByParam("initPage")}},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"header1"},[a("span",[e._v("分类")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:function(t){return e.getCommentsByParam("initPage")}},model:{value:e.sortVal,callback:function(t){e.sortVal=t},expression:"sortVal"}},e._l(e.sortOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"header3"},[a("span",[e._v("关键词")]),a("el-input",{staticClass:"keyword",attrs:{placeholder:"请输入关键词"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCommentsByParam("initPage")}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("div",{staticClass:"header3"},[a("span",[e._v("用户")]),a("el-input",{staticClass:"userName",attrs:{placeholder:"请输入用户名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getCommentsByParam("initPage")}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),a("div",{staticClass:"header2"},[a("span",[e._v("日期")]),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"unlink-panels":e.unlinkPanels},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("div",{staticClass:"header6",staticStyle:{"margin-left":"200px"}},[a("p",{staticClass:"search globalSearchBtnBg",on:{click:function(t){return e.getCommentsByParam("initPage")}}},[e._v("检索")]),a("p",{staticClass:"search globalSearchBtnBg",staticStyle:{"margin-left":"20px"},on:{click:e.reset}},[e._v("重置")])])]),a("el-main",[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:"","row-class-name":e.tableRowClassName},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",selectable:e.checkSelectChange,width:"30"}}),a("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.$index+1))]}}])}),a("el-table-column",{attrs:{prop:"username",label:"用户",width:"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"分类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e.parseType(t.row)))]}}])}),a("el-table-column",{attrs:{prop:"summary_",label:"详情","class-name":"detailCls"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"showDetailCls",on:{click:function(a){return a.stopPropagation(),e.showDetail(t.row)}}},[e._v(e._s(t.row.summary_?t.row.summary_:""))]),4==t.row.type?a("span",{staticClass:"showDetailCls",on:{click:function(a){return a.stopPropagation(),e.showDetail(t.row)}}},[a("i",{directives:[{name:"show",rawName:"v-show",value:t.row.paentData&&t.row.paentData.blog_info_images&&JSON.parse(t.row.paentData.blog_info_images).length>0,expression:"scope.row.paentData&&scope.row.paentData.blog_info_images&&JSON.parse(scope.row.paentData.blog_info_images).length>0"}],staticClass:"el-icon-picture"}),a("i",{directives:[{name:"show",rawName:"v-show",value:t.row.paentData&&t.row.paentData.blog_info_videos,expression:"scope.row.paentData&&scope.row.paentData.blog_info_videos"}],staticClass:"el-icon-video-camera-solid"})]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"content",label:"评论内容","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"commentTime",width:"200",label:"评论时间"}}),a("el-table-column",{attrs:{label:"评论智能审核",width:"130",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:1==t.row.status||0==t.row.status?e.passStyles:2==t.row.status?e.forbidStyles:e.normalStyles},[e._v(e._s(e.parseStatus(t.row)))])]}}])}),a("el-table-column",{attrs:{label:"人工审核",width:"220",align:"center","class-name":"manualReviewCls"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.status?a("span",{style:e.normalStyles},[e._v("用户已删除")]):a("div",[t.row.operateLog.length<=0||null==t.row.operateLog?a("span",[e._v("无")]):a("div",[a("el-popover",{attrs:{placement:"left",width:"480",trigger:"hover","popper-class":"tableCellPopperCls"}},[a("el-table",{attrs:{data:t.row.operateLog,"max-height":"280"}},[a("el-table-column",{attrs:{prop:"addTime",label:"时间",width:"170","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"log",label:"日志","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{property:"operateUser",label:"处理人","show-overflow-tooltip":""}})],1),a("div",{staticStyle:{cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[a("div",{staticClass:"global_ellipsis"},[e._v(e._s(t.row.operateLog[0].addTime))]),a("div",{staticStyle:{display:"flex","justify-content":"center"}},[a("span",{staticClass:"global_ellipsis_nowidth",staticStyle:{"max-width":"66%"}},[e._v("处理人:"+e._s(t.row.operateLog[0].operateUser||"---"))]),a("span",{staticClass:"global_ellipsis_nowidth statusLabel",class:"通过"==t.row.operateLog[0].log?"logPassColor":"未通过"==t.row.operateLog[0].log?"logrefuseColor":"logdefaultColor",staticStyle:{"max-width":"34%","margin-left":"8px"}},[e._v(e._s(t.row.operateLog[0].log))])])])],1)],1)])]}}])}),a("el-table-column",{attrs:{label:"通过状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:0==t.row.accessStatus,disabled:0==t.row.status,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(a){return e.changeStatus(t.$index,t.row)}},nativeOn:{click:function(t){return e.stopBubble(t)}}})]}}])}),a("el-table-column",{attrs:{label:"禁言状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:t.row.banned,disabled:0==t.row.status,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(a){return e.openForbidBanned(t.$index,t.row,e.bannnedStatus)}},nativeOn:{click:function(t){return t.stopPropagation(),e.stopBubble(t)}}})]}}])})],1)],a("div",[a("el-checkbox",{staticClass:"foot-check",on:{change:function(t){return e.toggleSelection(e.tableData)}},model:{value:e.isSelectAll,callback:function(t){e.isSelectAll=t},expression:"isSelectAll"}},[e._v("评论批量操作")]),a("button",{staticClass:"btn-pass",on:{click:function(t){return e.listCheck("0")}}},[e._v("通过")]),a("button",{staticClass:"btn-nopass",on:{click:function(t){return e.listCheck("1")}}},[e._v("不通过")]),a("paging",{attrs:{total:e.total,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1)],1)},s=[],o=(a("8e6e"),a("456d"),a("ac6a"),a("96cf"),a("3b8d")),r=a("bd86"),l=a("2f62");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var u={name:"CommentCheck",components:{},computed:i({},Object(l["b"])(["appId"])),data:function(){return{passStyles:{color:"#CAA267","font-weight":"bold"},forbidStyles:{color:"#C93931","font-weight":"bold"},normalStyles:{color:"#666666"},options:[{value:"",label:"全部"},{value:"0",label:"通过"},{value:"1",label:"未通过"},{value:"3",label:"已删除"}],sortOptions:[{value:"",label:"全部"},{value:0,label:"活动"},{value:-1,label:"评论"},{value:2,label:"新闻"},{value:4,label:"社区"}],loading:!1,bannnedStatus:!1,dateRange:[],keyword:"",userName:"",status:"",sortVal:"",userId:"",tableData:[],isSelectAll:!1,checkedList:[],currentPage:1,pageSize:10,total:10,unlinkPanels:!0,county:"",usefulData:[]}},methods:{stopBubble:function(e){e.stopPropagation()},showDetail:function(e){this.$emit("show-drawer",e)},tableRowClassName:function(e){var t=e.row;e.rowIndex;return"0"==t.status?"disable-row":""},checkSelectChange:function(e,t){return 0!=e.status},openForbidBanned:function(e,t,a){var n=this;1!=t.commentUser.commentStatus?this.$confirm("确定要禁言此用户吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,e.next=4,n.api.banned({autoId:t.commentUser.autoId,commentStatus:1});case 4:a=e.sent,a.success?(n.tableData.map(function(e){e.commentUser.autoId==t.commentUser.autoId&&(e.commentUser.commentStatus=1,e.banned=!0)}),n.$message({type:"success",message:"操作成功!"}),n.loading=!1):n.loading=!1,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).catch(function(){}):this.$confirm("确定要解除禁言此用户吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n.loading=!0,e.prev=1,e.next=4,n.api.banned({autoId:t.commentUser.autoId,commentStatus:0});case 4:a=e.sent,a.success&&(n.tableData.map(function(e){e.commentUser.autoId==t.commentUser.autoId&&(e.commentUser.commentStatus=0,e.banned=!1)}),n.$message({type:"success",message:"操作成功!"}),n.loading=!1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).catch(function(){})},parseType:function(e){return 0==e.type?"活动":1==e.type?"评论":2==e.type?"新闻":3==e.type?"评论":4==e.type?"mile"==this.county?"圈子":"社区":""},parseStatus:function(e){return 0==e.status?"通过":1==e.status?"通过":2==e.status?"未通过":"---"},changeStatus:function(e,t){var a=this;0==t.accessStatus?this.$confirm("确定要禁止此条评论吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function n(){var s;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.api.auditComment({commentId:t.commentId,accessStatus:"1"});case 3:s=n.sent,s.success?(a.tableData[e].accessStatus="1",s.data[0].operateLog.length>0&&(s.data[0].operateLog[0].operateUser=s.data[0].operateLog[0].operateUser&&"null"!=s.data[0].operateLog[0].operateUser?s.data[0].operateLog[0].operateUser:"---"),a.tableData[e].operateLog.unshift(s.data[0].operateLog[0]),a.$message({type:"success",message:"操作成功!"})):a.$message({type:"error",message:"操作失败!"}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}},n,null,[[0,7]])}))).catch(function(){}):this.$confirm("确定要显示此条评论吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function n(){var s;return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,a.api.auditComment({commentId:t.commentId,accessStatus:"0"});case 3:s=n.sent,s.success?(a.tableData[e].accessStatus="0",s.data[0].operateLog.length>0&&(s.data[0].operateLog[0].operateUser=s.data[0].operateLog[0].operateUser&&"null"!=s.data[0].operateLog[0].operateUser?s.data[0].operateLog[0].operateUser:"---"),a.tableData[e].operateLog.unshift(s.data[0].operateLog[0]),a.$message({type:"success",message:"操作成功!"})):a.$message({type:"error",message:"操作失败!"}),n.next=10;break;case 7:n.prev=7,n.t0=n["catch"](0),console.log(n.t0);case 10:case"end":return n.stop()}},n,null,[[0,7]])}))).catch(function(){})},toggleSelection:function(e){this.$refs.multipleTable.toggleAllSelection(e)},handleSelectionChange:function(e){this.checkedList=e,this.isSelectAll=this.checkedList.length===this.usefulData.length},listCheck:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,s,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.checkedList.length){e.next=5;break}return this.$message({type:"warn",message:"请勾选要审核的条目!"}),e.abrupt("return");case 5:return this.loading=!0,a=[],this.checkedList.map(function(e){a.push({commentId:e.commentId,accessStatus:t})}),e.next=10,this.api.auditCommentList(a);case 10:n=e.sent,this.loading=!1,n.success?(s=this,this.checkedList.map(function(e){o.tableData.map(function(a){e.commentId==a.commentId&&(a.accessStatus=t)})}),this.checkedList=[],this.$refs.multipleTable.clearSelection(),n.data.length>0&&n.data.forEach(function(e,t){e.operateLog.length>0&&e.operateLog.forEach(function(e,t){e.operateUser&&"null"!=e.operateUser||(e.operateUser="---")}),s.tableData.map(function(t){e.commentId==t.commentId&&t.operateLog.unshift(e.operateLog[0])})}),this.$message({type:"success",message:"操作成功"})):this.$message({type:"error",message:n.message});case 13:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),reset:function(){this.sortVal="",this.dateRange=[],this.keyword="",this.userName="",this.userId=[],this.status="",this.getCommentsByParam("initPage")},getCommentsByParam:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,n,s,o,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,"initPage"==t&&(this.currentPage=1),!this.userName.trim()){e.next=16;break}return e.prev=3,e.next=6,this.api.queryUserAutoId({personName:this.userName});case 6:a=e.sent,[],a.success?this.userId=a.data:this.userId=[-1],e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](3),console.log(e.t0);case 14:e.next=17;break;case 16:this.userId=[];case 17:return e.prev=17,n={pageNo:this.currentPage,pageSize:this.pageSize,content:this.keyword.trim(),startTime:this.dateRange&&this.dateRange.length>0?this.dateRange[0]:"",endTime:this.dateRange&&this.dateRange.length>0?this.dateRange[1]:"",autoIds:this.userId,type:this.sortVal},s=this.status,""!==s&&(0==s?n.accessStatus=s:1==s?n.accessStatus=s:3==s&&(n.accessStatus="",n.status=0)),e.next=23,this.api.getComments(n);case 23:o=e.sent,this.loading=!1,r=this,o.data.forEach(function(e,t){e.commentUser&&1==e.commentUser.commentStatus?e.banned=!0:e.banned=!1,e.paentData&&e.paentData.content?e.summary_=r.commonFunc.filterSummary(e.paentData.content):e.summary_="",e.operateLog.length>0&&e.operateLog.forEach(function(e,t){e.operateUser&&"null"!=e.operateUser||(e.operateUser="---")})}),this.tableData=o.data,this.usefulData=this.tableData.filter(function(e,t){return 0!=e.status}),this.total=o.total,e.next=35;break;case 32:e.prev=32,e.t1=e["catch"](17),console.log(e.t1);case 35:case"end":return e.stop()}},e,this,[[3,11],[17,32]])}));function t(t){return e.apply(this,arguments)}return t}()},created:function(){var e=this.commonFunc.parseUrlParam(window.location.href);this.county=e["county"],"mile"==this.county?this.sortOptions=[{value:"",label:"全部"},{value:0,label:"活动"},{value:-1,label:"评论"},{value:2,label:"新闻"},{value:4,label:"圈子"}]:this.sortOptions=[{value:"",label:"全部"},{value:0,label:"活动"},{value:-1,label:"评论"},{value:2,label:"新闻"},{value:4,label:"社区"}]},mounted:function(){this.getCommentsByParam()},watch:{currentPage:function(e,t){e&&this.getCommentsByParam()}}},p=u,m=(a("b337"),a("2877")),d=Object(m["a"])(p,n,s,!1,null,null,null);t["default"]=d.exports},b337:function(e,t,a){"use strict";var n=a("1fb3"),s=a.n(n);s.a},bd86:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("85f2"),s=a.n(n);function o(e,t,a){return t in e?s()(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},f1ae:function(e,t,a){"use strict";var n=a("86cc"),s=a("4630");e.exports=function(e,t,a){t in e?n.f(e,t,s(0,a)):e[t]=a}}}]);