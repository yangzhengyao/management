(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8c10b2ee"],{"1eb7":function(e,t,a){},"4e26":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"feedback"},[a("el-container",[a("el-header",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"header-left"},[a("div",{staticClass:"filterFormContral"},[a("span",{staticStyle:{width:"30px"}},[e._v("日期")]),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"],"unlink-panels":e.unlinkPanels},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)]),a("div",{staticClass:"header-right"},[a("p",{staticClass:"globalHistoryDeleteBtnBg",staticStyle:{"margin-right":"20px"},on:{click:e.openDeleteHistory}},[e._v("删除历史")]),a("p",{staticClass:"search globalSearchBtnBg",on:{click:function(t){return e.queryFeedbackList("initPage")}}},[e._v("检索")]),a("p",{staticClass:"search globalSearchBtnBg",staticStyle:{"margin-left":"20px"},on:{click:e.reset}},[e._v("重置")])])]),a("el-main",[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:""}},[a("el-table-column",{attrs:{label:"申请时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.applyTime))])]}}])}),a("el-table-column",{attrs:{prop:"subscribeName",label:"用户",width:"240","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"description",label:"联系方式",width:"300","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"summary_",label:"正文","class-name":"detailCls"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"showDetailCls",on:{click:function(a){return a.stopPropagation(),e.showDetail(t.row)}}},[e._v(e._s(t.row.summary_?t.row.summary_:""))])]}}])}),a("el-table-column",{attrs:{prop:"operation",label:"操作","class-name":"operationColumnCls",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{display:"flex","justify-content":"flex-start"}},[a("button",{staticClass:"deleteCls",on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除\n                                    ")]),a("button",{staticClass:"logBtnCls",on:{click:function(a){return e.open_operationLog(t.row)}}},[e._v("日志")])])]}}])})],1)],a("div",[a("paging",{attrs:{total:e.pageTotal,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1),a("operationLog",{attrs:{operationLogModal:e.operationLogModal,operationlog_rowData:e.operationlog_rowData,Operationlog_fromMark:e.Operationlog_fromMark},on:{operationlog_childEvent:e.operationLog_parentMethod}}),a("deleteHistoryLog",{attrs:{deleteHistoryLogModal:e.deleteHistoryLogModal,deleteHistoryRow:e.deleteHistoryRow,fromPage:e.fromPage},on:{deleteHistoryLog_childEvent:e.deleteHistoryLog_parentMethod,sycncRefresh_childEvent:e.sycncRefresh_parentMethod}})],1)},o=[],i=(a("96cf"),a("3b8d")),n=a("e5de"),s=a("f670"),l={name:"feedback",data:function(){return{passStyles:{color:"#3A8B51","font-weight":"bold"},forbidStyles:{color:"#C93931","font-weight":"bold"},normalStyles:{color:"#E9BB1C","font-weight":"bold"},loading:!1,currentPage:1,pageSize:10,pageTotal:0,tableData:[],rowData:"",dateRange:[],unlinkPanels:!0,operationLogModal:!1,operationlog_rowData:"",Operationlog_fromMark:"",deleteHistoryLogModal:!1,deleteHistoryRow:"",fromPage:""}},mounted:function(){},watch:{currentPage:function(e,t){e&&this.queryFeedbackList()}},components:{operationLog:n["a"],deleteHistoryLog:s["a"]},methods:{showDetail:function(e){this.$emit("show-drawer",e)},reset:function(){this.dateRange=[],this.queryFeedbackList("initPage")},queryFeedbackList:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,"initPage"==t&&(this.currentPage=1),e.prev=2,a={pageNo:this.currentPage,pageSize:this.pageSize,startTime:this.dateRange&&this.dateRange.length>0?this.dateRange[0]:"",endTime:this.dateRange&&this.dateRange.length>0?this.dateRange[1]:""},e.next=6,this.api.getSubscriptionList(a);case 6:r=e.sent,this.loading=!1,[],1==r.success?(this.tableData=r.data,this.pageTotal=r.total):this.tableData=[],e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](2),console.log(e.t0);case 15:case"end":return e.stop()}},e,this,[[2,12]])}));function t(t){return e.apply(this,arguments)}return t}(),deleteClick:function(e){var t=this;this.$confirm("确定删除此条反馈吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,t.api.deleteSubscription({id:e.id});case 4:r=a.sent,r.success?(t.queryFeedbackList(),t.$message({type:"success",message:r.message})):(t.loading=!1,t.$message({type:"error",message:r.message})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[1,8]])}))).catch(function(){})},open_operationLog:function(e){this.operationLogModal=!0,this.operationlog_rowData=e,this.Operationlog_fromMark="subscription"},operationLog_parentMethod:function(e){this.operationLogModal=e.operationLogModal},openDeleteHistory:function(e){this.deleteHistoryLogModal=!0,this.deleteHistoryRow=e,this.fromPage="subscription"},deleteHistoryLog_parentMethod:function(e){this.deleteHistoryLogModal=e.deleteHistoryLogModal},sycncRefresh_parentMethod:function(){this.currentPage=1,this.queryFeedbackList("initPage")},dialogOptionsChange:function(e){this.createForm.type=e}}},c=l,d=(a("a331"),a("2877")),u=Object(d["a"])(c,r,o,!1,null,null,null);t["default"]=u.exports},6318:function(e,t,a){"use strict";var r=a("6f2a"),o=a.n(r);o.a},"6f2a":function(e,t,a){},a331:function(e,t,a){"use strict";var r=a("1eb7"),o=a.n(r);o.a},f670:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"删除历史","custom-class":"commonHeader deleteHistoryLogModalCls",top:e.deleteHistoryLogTopCss,visible:e.currentDeleteHistoryLogModal},on:{open:e.openModalFunc,"update:visible":function(t){e.currentDeleteHistoryLogModal=t}}},[a("div",{staticStyle:{height:"500px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.deleteHistoryLogLoading,expression:"deleteHistoryLogLoading"}],attrs:{data:e.deleteHistoryLogTableData,stripe:"",border:"","max-height":"500"}},[e._l(e.deleteTitleData,function(e,t){return[a("el-table-column",{key:t,attrs:{"show-overflow-tooltip":!0,property:e.property,label:e.label}})]}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 6px"},attrs:{size:"mini",type:"primary",round:"",loading:t.row.btnLoading},nativeOn:{click:function(a){return e.undeleteAdvert(t.row,t.$index)}}},[e._v("恢复\n                    ")])]}}])})],2)],1),a("div",{staticStyle:{"padding-top":"20px",height:"36px"}},[a("detailPaging",{attrs:{total:e.detailPageTotal,detailCurrentPage:e.detailCurrentPage,pageSize:e.detailPageSize},on:{"update:detailCurrentPage":function(t){e.detailCurrentPage=t},"update:detail-current-page":function(t){e.detailCurrentPage=t}}})],1)])},o=[],i=(a("ac6a"),a("96cf"),a("3b8d")),n=a("9d43"),s={name:"deleteHistoryLogModal",data:function(){return{currentDeleteHistoryLogModal:!1,deleteHistoryLogTableData:[],deleteHistoryLogLoading:!1,detailPageTotal:0,detailCurrentPage:1,detailPageSize:10,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},deleteHistoryLogTopCss:"10vh",deleteTitleData:[],columnData:{ad:[{label:"广告说明",property:"advertName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],subscription:[{label:"名称",property:"subscribeName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],circle:[{label:"名称",property:"themeName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],topic:[{label:"名称",property:"topicName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"username"}],user:[{label:"昵称",property:"nickName"},{label:"删除时间",property:"delTime"},{label:"操作人",property:"userName"}]}}},props:["deleteHistoryLogModal","deleteHistoryRow","fromPage"],components:{detailPaging:n["a"]},methods:{openModalFunc:function(){this.fromPage&&(this.deleteTitleData=this.columnData[this.fromPage]),this.detailCurrentPage=1,this.queryTableData()},queryTableData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.deleteHistoryLogLoading=!0,e.prev=1,a={pageNo:this.detailCurrentPage,pageSize:this.detailPageSize},"ad"!=this.fromPage){e.next=9;break}return e.next=6,this.api.queryHistoryDeleteLog(a);case 6:t=e.sent,e.next=31;break;case 9:if("subscription"!=this.fromPage){e.next=15;break}return e.next=12,this.api.queryHistoryDeleteLog_subscription(a);case 12:t=e.sent,e.next=31;break;case 15:if("circle"!=this.fromPage){e.next=21;break}return e.next=18,this.api.queryHistoryDeleteLog_circle(a);case 18:t=e.sent,e.next=31;break;case 21:if("topic"!=this.fromPage){e.next=27;break}return e.next=24,this.api.queryHistoryDeleteLog_topic(a);case 24:t=e.sent,e.next=31;break;case 27:if("user"!=this.fromPage){e.next=31;break}return e.next=30,this.api.queryHistoryDeleteLog_user(a);case 30:t=e.sent;case 31:t.success?(this.deleteHistoryLogLoading=!1,t.data.length>0?(t.data.forEach(function(e,t){e.btnLoading=!1}),this.deleteHistoryLogTableData=t.data,this.detailPageTotal=t.total):(this.deleteHistoryLogTableData=[],this.detailPageTotal=0)):(this.deleteHistoryLogTableData=[],this.deleteHistoryLogLoading=!1,this.$message({type:"error",message:t.message,duration:1e3})),e.next=37;break;case 34:e.prev=34,e.t0=e["catch"](1),console.log(e.t0);case 37:case"end":return e.stop()}},e,this,[[1,34]])}));function t(){return e.apply(this,arguments)}return t}(),undeleteRequest:function(){this.$emit("sycncRefresh_childEvent",{})},undeleteAdvert:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t,a){var r,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.deleteHistoryLogTableData[a].btnLoading=!0,e.prev=1,"ad"!=this.fromPage){e.next=9;break}return r={advertId:t.pid},e.next=6,this.api.undeleteAd(r);case 6:o=e.sent,e.next=35;break;case 9:if("subscription"!=this.fromPage){e.next=16;break}return r={pid:t.pid},e.next=13,this.api.undelete_subscription(r);case 13:o=e.sent,e.next=35;break;case 16:if("circle"!=this.fromPage){e.next=23;break}return r={themeId:t.themeId},e.next=20,this.api.undelete_circle(r);case 20:o=e.sent,e.next=35;break;case 23:if("topic"!=this.fromPage){e.next=30;break}return r={topicId:t.pid},e.next=27,this.api.undelete_topic(r);case 27:o=e.sent,e.next=35;break;case 30:if("user"!=this.fromPage){e.next=35;break}return r={delUserId:t.delUserId},e.next=34,this.api.undelete_user(r);case 34:o=e.sent;case 35:this.deleteHistoryLogTableData[a].btnLoading=!1,o.success?(this.undeleteRequest(),this.queryTableData(),this.$message({type:"success",message:o.message,duration:1e3})):this.$message({type:"error",message:o.message,duration:1e3}),e.next=42;break;case 39:e.prev=39,e.t0=e["catch"](1),console.log(e.t0);case 42:case"end":return e.stop()}},e,this,[[1,39]])}));function t(t,a){return e.apply(this,arguments)}return t}()},mounted:function(){},watch:{deleteHistoryLogModal:function(e){this.currentDeleteHistoryLogModal=e},currentDeleteHistoryLogModal:function(e){this.$emit("deleteHistoryLog_childEvent",{deleteHistoryLogModal:e})},detailCurrentPage:function(e,t){e&&this.queryTableData()}}},l=s,c=(a("6318"),a("2877")),d=Object(c["a"])(l,r,o,!1,null,null,null);t["a"]=d.exports}}]);