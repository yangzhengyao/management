(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c398d76"],{"0ff6":function(e,t,a){},"44f1":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"circles"},[s("el-container",[s("el-header",[s("div",[s("span",[e._v("*")]),s("span",[e._v("前8个圈子将会在app导航栏中显示")])]),s("div",{staticClass:"globalSearchBtnBg",on:{click:e.addcircles}},[e._v("新建圈子")]),s("div",{staticClass:"globalHistoryDeleteBtnBg",staticStyle:{"margin-right":"20px"},on:{click:e.openDeleteHistory}},[e._v("删除历史")])]),s("el-main",[[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"row-key":"themeId","row-class-name":"el-dragRowCls",stripe:"","max-height":"700",border:""}},[s("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),s("el-table-column",{attrs:{prop:"themeName",label:"圈子名称"}}),s("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),s("el-table-column",{attrs:{prop:"blogCount",label:"动态数"}}),s("el-table-column",{attrs:{prop:"synopsis",label:"圈子简介","show-overflow-tooltip":""}}),s("el-table-column",{attrs:{prop:"topicPic",label:"圈子头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"30px",height:"30px"},attrs:{src:e.row.topicPic,fit:"cover"}},[s("div",{staticClass:"image-slot",staticStyle:{"margin-top":"5px"},attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])]}}])}),s("el-table-column",{attrs:{prop:"background",label:"圈子背景"},scopedSlots:e._u([{key:"default",fn:function(e){return[s("el-image",{staticStyle:{width:"110px",height:"30px"},attrs:{src:e.row.background,fit:"cover"}},[s("div",{staticClass:"image-slot",staticStyle:{"margin-top":"5px"},attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])]}}])}),s("el-table-column",{attrs:{prop:"sort",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-tooltip",{attrs:{content:"置顶",placement:"top"}},[s("img",{staticClass:"jiantou",attrs:{src:a("ad52"),alt:""},on:{click:function(a){return e.goTop(t.$index)}}})]),s("el-tooltip",{attrs:{content:"上移",placement:"top"}},[s("img",{staticClass:"jiantou",attrs:{src:a("ffcb"),alt:""},on:{click:function(a){return e.goUp(t.$index)}}})]),s("el-tooltip",{attrs:{content:"下移",placement:"top"}},[s("img",{staticClass:"jiantou",attrs:{src:a("8414"),alt:""},on:{click:function(a){return e.goDown(t.$index)}}})]),s("el-tooltip",{attrs:{content:"置底",placement:"top"}},[s("img",{staticClass:"jiantou jiantou4",attrs:{src:a("d950"),alt:""},on:{click:function(a){return e.goBottom(t.$index)}}})])]}}])}),s("el-table-column",{attrs:{prop:"state",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-switch",{attrs:{value:1==t.row.status,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(a){return e.changeStatus(t.$index,t.row)}},nativeOn:{click:function(t){return e.stopBubble(t)}}})]}}])}),s("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("button",{on:{click:function(a){return e.editCircles(t.row)}}},[e._v("修改")]),s("button",{staticClass:"deleteCls",on:{click:function(a){return e.deleteCircles(t.row)}}},[e._v("删除")]),s("button",{staticClass:"logBtnCls",on:{click:function(a){return e.open_operationLog(t.row)}}},[e._v("日志")])]}}])})],1)]],2),s("el-dialog",{attrs:{visible:e.dialogVisible,"custom-class":"newCircleCls",title:e.modalTitle,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t},close:e.closeModal}},[s("div",[s("el-form",{ref:"circlesForm",staticClass:"demo-ruleForm",attrs:{model:e.circlesForm,"label-width":"95px"}},[s("el-form-item",{attrs:{label:"圈子名称：",prop:"themeName",rules:[{required:!0,message:"请输入圈子名称",trigger:"blur"}]}},[s("el-input",{staticClass:"w400",attrs:{placeholder:"限10个字",maxlength:"10"},model:{value:e.circlesForm.themeName,callback:function(t){e.$set(e.circlesForm,"themeName",t)},expression:"circlesForm.themeName"}})],1),s("el-form-item",{attrs:{label:"圈子简介：",prop:"synopsis"}},[s("el-input",{ref:"modal_synopsis",staticClass:"w400",attrs:{type:"textarea",rows:5,placeholder:"限50个字",maxlength:"50"},model:{value:e.circlesForm.synopsis,callback:function(t){e.$set(e.circlesForm,"synopsis",t)},expression:"circlesForm.synopsis"}})],1),s("el-form-item",{attrs:{label:"圈子头像：",prop:"topicPic",rules:[{required:!0,message:"请上传圈子头像",trigger:"blur"}]}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.commonUploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.circlesForm.topicPic?s("img",{staticClass:"avatar",attrs:{src:e.circlesForm.topicPic}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),s("span",{staticClass:"imgtips"},[e._v("120px*120px")])],1),s("el-form-item",{attrs:{label:"圈子背景：",prop:"background",rules:[{required:!0,message:"请上传圈子背景",trigger:"blur"}]}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.commonUploadUrl,"show-file-list":!1,"on-success":e.handleBackgroundSuccess,"before-upload":e.beforeAvatarUpload}},[e.circlesForm.background?s("img",{staticClass:"avatar avatar1",attrs:{src:e.circlesForm.background}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon avatar-uploader-icon1"})]),s("span",{staticClass:"imgtips"},[e._v("750px*220px")])],1),s("el-form-item",{attrs:{label:"圈子导航：",prop:"pictureUrl",rules:[{required:!0,message:"请上传圈子导航",trigger:"blur"}]}},[s("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.commonUploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess2,"before-upload":e.beforeAvatarUpload}},[e.circlesForm.pictureUrl?s("img",{staticClass:"avatar avatar2",attrs:{src:e.circlesForm.pictureUrl}}):s("i",{staticClass:"el-icon-plus avatar-uploader-icon avatar-uploader-icon2"})]),s("span",{staticClass:"imgtips"},[e._v("268px*140px")])],1),s("el-form-item",[s("el-button",{staticClass:"unusualBtnCls",on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),s("el-button",{staticClass:"unusualBtnCls",attrs:{type:"primary"},on:{click:function(t){return e.insertNewTheme("circlesForm")}}},[e._v("确定")])],1)],1)],1)])],1),s("operationLog",{attrs:{operationLogModal:e.operationLogModal,operationlog_rowData:e.operationlog_rowData,Operationlog_fromMark:e.Operationlog_fromMark},on:{operationlog_childEvent:e.operationLog_parentMethod}}),s("deleteHistoryLog",{attrs:{deleteHistoryLogModal:e.deleteHistoryLogModal,deleteHistoryRow:e.deleteHistoryRow,fromPage:e.fromPage},on:{deleteHistoryLog_childEvent:e.deleteHistoryLog_parentMethod,sycncRefresh_childEvent:e.sycncRefresh_parentMethod}})],1)},r=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),i=a("bd86"),n=a("2f62"),c=a("aa47"),l=a("e5de"),p=a("f670");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(i["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var m={name:"CommentCheck",components:{operationLog:l["a"],deleteHistoryLog:p["a"]},data:function(){return{circlesForm:{themeName:"",synopsis:"",topicPic:"",background:"",pictureUrl:""},textarea:"",value:"",input:"",value1:"",tableData:[],loading:!1,checked:!1,state:!0,radio:"2",currentPage:1,pageSize:10,total:10,dialogVisible:!1,commonUploadUrl:this.api.getHongqiUploadUrl(),modalTitle:"新建圈子",isEditFlag:!1,operationLogModal:!1,operationlog_rowData:"",Operationlog_fromMark:"",deleteHistoryLogModal:!1,deleteHistoryRow:"",fromPage:""}},computed:d({},Object(n["b"])(["appId"])),methods:{validateCirclename:function(e,t,a){""===t||null==t?a(new Error("请输入话题名称！")):(t.length>255&&a(new Error("圈子名称长度不得超过255！")),a())},validateCircledesc:function(e,t,a){""===t||null==t?a():(t.length>255&&a(new Error("圈子简介长度不得超过255！")),a())},rowDrop:function(){var e=document.querySelector(".circles .el-table__body-wrapper tbody"),t=this;c["a"].create(e,{animation:150,ghostClass:"sortable-ghost-class",onEnd:function(e){var a=e.newIndex,s=e.oldIndex,r=t.tableData.splice(s,1)[0];t.tableData.splice(a,0,r),t.updateCircleFunc()}})},stopBubble:function(e){e.stopPropagation()},swapItem:function(e,t){this.tableData[e]=this.tableData.splice(t,1,this.tableData[e])[0]},goTop:function(e){0!=e?(this.tableData.unshift(this.tableData.splice(e,1)[0]),this.updateCircleFunc()):this.$message({type:"warning",message:"到顶了！"})},goUp:function(e){0!=e?(this.swapItem(e,e-1),this.updateCircleFunc()):this.$message({type:"warning",message:"到顶了！"})},goDown:function(e){e!=this.tableData.length-1?(this.swapItem(e,e+1),this.updateCircleFunc()):this.$message({type:"warning",message:"到底了！"})},goBottom:function(e){e!=this.tableData.length-1?(this.tableData.push(this.tableData.splice(e,1)[0]),this.updateCircleFunc()):this.$message({type:"warning",message:"到底了！"})},updateCircleFunc:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.updateSortTheme(this.tableData);case 3:t=e.sent,t.success?this.$message({type:"success",message:t.message}):this.$message({type:"error",message:t.message}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),handleAvatarSuccess:function(e,t){this.circlesForm.topicPic=e.data[0]},handleBackgroundSuccess:function(e,t){this.circlesForm.background=e.data[0]},handleAvatarSuccess2:function(e,t){this.circlesForm.pictureUrl=e.data[0]},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,s=e.size/1024/1024<2;return t||a||this.$message.error("上传头像图片只能是 JPG/png 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),(t||a)&&s},closeModal:function(){void 0!==this.$refs["circlesForm"]&&this.$refs["circlesForm"].resetFields()},getThemeList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this.api.getTheme({appInfoId:this.appId});case 4:t=e.sent,this.loading=!1,this.tableData=t.data,this.total=t.total,e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}(),addcircles:function(){this.modalTitle="新建圈子",this.dialogVisible=!0,this.isEditFlag=!1,this.circlesForm={themeName:"",synopsis:"",topicPic:"",background:"",pictureUrl:""}},insertNewTheme:function(e){var t=this;this.$refs[e].validate(function(e){e?t.submitFunc():t.$message.error("校验失败！")})},submitFunc:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,this.circlesForm.appInfoId=this.appId,this.circlesForm.createId=1,!this.isEditFlag){e.next=9;break}return e.next=6,this.api.updateTheme(this.circlesForm);case 6:t=e.sent,e.next=12;break;case 9:return e.next=11,this.api.insertTheme(this.circlesForm);case 11:t=e.sent;case 12:t.success?(this.$message({type:"success",message:t.message}),this.getThemeList(),this.dialogVisible=!this.dialogVisible):this.$message({type:"error",message:t.message}),e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](0),console.log(e.t0);case 18:case"end":return e.stop()}},e,this,[[0,15]])}));function t(){return e.apply(this,arguments)}return t}(),deleteCircles:function(e){var t=this;this.$confirm("确定删除此圈子吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function a(){var s;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,t.api.deleteTheme({appInfoId:t.appId,themeId:e.themeId});case 4:s=a.sent,s.success?(t.$message({type:"success",message:"操作成功!"}),t.getThemeList()):(t.loading=!1,t.$message({type:"error",message:"操作失败!"})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[1,8]])}))).catch(function(){})},editCircles:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.modalTitle="修改圈子",this.isEditFlag=!0,e.prev=2,e.next=5,this.api.getThemeById({appInfoId:this.appId,themeId:t.themeId});case 5:a=e.sent,a.success?(this.dialogVisible=!this.dialogVisible,this.circlesForm=a.data[0]):this.$message({type:"error",message:"获取信息失败!"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(t){return e.apply(this,arguments)}return t}(),changeStatus:function(e,t){var a=this;1==t.status?this.$confirm("确定要禁止此圈子吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function s(){var r;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,a.api.updateStatusTheme({appInfoId:a.appId,themeId:t.themeId,status:0});case 3:r=s.sent,r.success?(a.tableData[e].status="0",a.$message({type:"success",message:"操作成功!"})):a.$message({type:"error",message:"操作失败!"}),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.log(s.t0);case 10:case"end":return s.stop()}},s,null,[[0,7]])}))).catch(function(){}):this.$confirm("确定要显示此圈子吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(o["a"])(regeneratorRuntime.mark(function s(){var r;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,a.api.updateStatusTheme({appInfoId:a.appId,themeId:t.themeId,status:1});case 3:r=s.sent,r.success?(a.tableData[e].status="1",a.$message({type:"success",message:"操作成功!"})):a.$message({type:"error",message:"操作失败!"}),s.next=10;break;case 7:s.prev=7,s.t0=s["catch"](0),console.log(s.t0);case 10:case"end":return s.stop()}},s,null,[[0,7]])}))).catch(function(){})},open_operationLog:function(e){this.operationLogModal=!0,this.operationlog_rowData=e,this.Operationlog_fromMark="circle"},operationLog_parentMethod:function(e){this.operationLogModal=e.operationLogModal},openDeleteHistory:function(e){this.deleteHistoryLogModal=!0,this.deleteHistoryRow=e,this.fromPage="circle"},deleteHistoryLog_parentMethod:function(e){this.deleteHistoryLogModal=e.deleteHistoryLogModal},sycncRefresh_parentMethod:function(){this.getThemeList()}},mounted:function(){this.rowDrop(),this.getThemeList()}},g=m,h=(a("ae50"),a("2877")),f=Object(h["a"])(g,s,r,!1,null,null,null);t["default"]=f.exports},ae50:function(e,t,a){"use strict";var s=a("0ff6"),r=a.n(s);r.a}}]);