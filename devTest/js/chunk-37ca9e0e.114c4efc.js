(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37ca9e0e"],{"37db":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"manuscript"},[a("el-container",[a("el-header",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"header-left"},[a("div",{staticClass:"input1"},[a("span",[e._v("作者")]),a("el-input",{attrs:{placeholder:"请输入作者"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.author,callback:function(t){e.author=t},expression:"author"}})],1),a("div",{staticClass:"input1"},[a("span",[e._v("标题")]),a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("div",{staticClass:"select1"},[a("span",[e._v("栏目")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:e.stateOptionsChange},model:{value:e.stateValue,callback:function(t){e.stateValue=t},expression:"stateValue"}},e._l(e.stateOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),a("div",{staticClass:"select2"},[a("span",[e._v("日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","unlink-panels":!0},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1)]),a("div",{staticClass:"header-right globalSearchBtnBg"},[a("p",{staticClass:"search",on:{click:e.search}},[e._v("检索")])]),a("div",{staticClass:"header-right globalSearchBtnBg"},[a("p",{staticClass:"search",on:{click:e.reset}},[e._v("重置")])])]),a("el-main",[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:""}},[a("el-table-column",{attrs:{label:"标题","class-name":"openSourceLinkCls","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"titleCls",on:{click:function(a){return e.openSouceManuscript(t.row)}}},[e._v(e._s(t.row.title))])]}}])}),a("el-table-column",{attrs:{prop:"pubTime",label:"日期",width:"180"}}),a("el-table-column",{attrs:{prop:"author",label:"作者",width:"180"}}),a("el-table-column",{attrs:{prop:"columnName",label:"栏目",width:"180"}}),21==e.appId?[a("el-table-column",{attrs:{label:"浏览量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.readNumFake||0))])]}}],null,!1,2118398843)}),a("el-table-column",{attrs:{label:"分享量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.shareNum||0))])]}}],null,!1,1447528109)}),a("el-table-column",{attrs:{label:"点赞量",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.likeNum||0))])]}}],null,!1,320935947)})]:[a("el-table-column",{attrs:{label:"浏览量（修改）",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.readNum))]),a("span",[e._v("("+e._s(t.row.readNumFake||0)+")")])]}}])}),a("el-table-column",{attrs:{label:"分享量（修改）",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.shareNum))]),a("span",[e._v("("+e._s(t.row.shareNumFake||0)+")")])]}}])}),a("el-table-column",{attrs:{label:"点赞量（修改）",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.likeNum))]),a("span",[e._v("("+e._s(t.row.likeNumFake||0)+")")])]}}])})],21!=e.appId?a("el-table-column",{attrs:{prop:"weightNum",label:"加权数",width:"180"}}):e._e(),21!=e.appId?a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("button",{on:{click:function(a){return e.editClick(t.row)}}},[e._v("修改")]),a("button",{on:{click:function(a){return e.open_operationLog(t.row)}}},[e._v("日志")])]}}],null,!1,2785669721)}):e._e()],2)],a("div",[a("paging",{attrs:{total:e.pageTotal,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.editDialog,width:"30%",top:e.editTopCss},on:{"update:visible":function(t){e.editDialog=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"浏览量",prop:"readNum"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",placeholder:"请输入"},on:{change:e.read_change},model:{value:e.editForm.readNum,callback:function(t){e.$set(e.editForm,"readNum",e._n(t))},expression:"editForm.readNum"}})],1),a("el-form-item",{attrs:{label:"分享量",prop:"shareNum"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",placeholder:"请输入"},on:{change:e.share_change},model:{value:e.editForm.shareNum,callback:function(t){e.$set(e.editForm,"shareNum",e._n(t))},expression:"editForm.shareNum"}})],1),a("el-form-item",{attrs:{label:"点赞量",prop:"likeNum"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",placeholder:"请输入"},on:{change:e.like_change},model:{value:e.editForm.likeNum,callback:function(t){e.$set(e.editForm,"likeNum",e._n(t))},expression:"editForm.likeNum"}})],1),a("el-form-item",{attrs:{label:"加权数",prop:"weightNum"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",placeholder:"请输入"},on:{change:e.weight_change},model:{value:e.editForm.weightNum,callback:function(t){e.$set(e.editForm,"weightNum",e._n(t))},expression:"editForm.weightNum"}})],1)],1),a("div",{staticClass:"remarks"},[e._v("\n\t\t\t\t（乘以系数，例如系数为10，APP用户单次阅读、分享、点赞行为"),a("br"),e._v("累积量加10）\n\t\t\t")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.resetForm("editForm")}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("editForm")}}},[e._v("确 定")])],1)],1),a("operationLog",{attrs:{operationLogModal:e.operationLogModal,operationlog_rowData:e.operationlog_rowData,Operationlog_fromMark:e.Operationlog_fromMark},on:{operationlog_childEvent:e.operationLog_parentMethod}})],1)},n=[],i=(a("8e6e"),a("456d"),a("386d"),a("ac6a"),a("96cf"),a("3b8d")),o=a("bd86"),s=a("2f62"),l=a("e5de");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var h={name:"manuscript",components:{operationLog:l["a"]},computed:c({},Object(s["b"])(["appId"])),data:function(){var e=function(e,t,a){var r=/^[+]{0,1}(\d+)$/g;""===t||null==t?a(new Error("请输入！")):(r.test(t)||a(new Error("输入格式不正确，请输入大于等于0的整数！")),a())};return{author:"",title:"",stateValue:"",dateRange:[],stateOptions:[{value:"",label:"全部"}],loading:!1,currentPage:1,currentRow:{},pageSize:10,pageTotal:0,tableData:[],editDialog:!1,dialogTitle:"修改",editTopCss:"20vh",editForm:{readNum:"",shareNum:"",likeNum:"",weightNum:""},editCompare:{readNum:"",shareNum:"",likeNum:"",weightNum:""},editRules:{readNum:[{required:!0,validator:e,trigger:"change"}],shareNum:[{required:!0,validator:e,trigger:"change"}],likeNum:[{required:!0,validator:e,trigger:"change"}],weightNum:[{required:!0,validator:e,trigger:"change"}]},isChangeRead:!1,isChangeShare:!1,isChangeLike:!1,isChangeWeight:!1,operationLogModal:!1,operationlog_rowData:"",Operationlog_fromMark:""}},mounted:function(){this.getNewsColumn(),this.getNewsChannelData()},watch:{currentPage:function(e,t){e&&this.getNewsChannelData()}},methods:{read_change:function(e){this.isChangeRead=this.editCompare.readNum!=e},share_change:function(e){this.isChangeShare=this.editCompare.shareNum!=e},like_change:function(e){this.isChangeLike=this.editCompare.likeNum!=e},weight_change:function(e){this.isChangeWeight=this.editCompare.weightNum!=e},openSouceManuscript:function(e){e.url?window.open(e.url,"_blank"):this.$message({type:"error",message:"源链接不存在！"})},getNewsChannelData:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,t={pageNum:this.currentPage-1,pageSize:this.pageSize,title:this.title,author:this.author,includedColumnIds:this.stateValue,startTime:this.dateRange&&this.dateRange.length>0?this.dateRange[0]:"",endTime:this.dateRange&&this.dateRange.length>0?this.dateRange[1]:""},e.next=5,this.api.getNewsChannelData(t);case 5:a=e.sent,a.success?(this.loading=!1,a.data.length>0?(this.pageTotal=a.data[0].totalElements,this.tableData=a.data[0].content.length>0?a.data[0].content:[]):(this.pageTotal=0,this.tableData=[])):(this.tableData=[],this.pageTotal=0,this.loading=!1,this.$message({type:"error",message:a.message})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),updateNumber:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,r,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.prev=1,r={readNumTimeIncrease:t.readNum,shareNumFake:t.shareNum,likeNumFake:t.likeNum,weightNum:t.weightNum,fake:1,url:this.currentRow.url,urlMD5:this.currentRow.urlMD5,columnName:this.currentRow.columnName},this.isChangeRead&&(r.originalReadNumFake=this.editCompare.readNum),this.isChangeShare&&(r.originalShareNumFake=this.editCompare.shareNum),this.isChangeLike&&(r.originalLikeNumFake=this.editCompare.likeNum),this.isChangeWeight&&(r.originalWeightNum=this.editCompare.weightNum),e.next=9,this.api.updateNumber(r);case 9:n=e.sent,n.success?(a.close(),this.$message({type:"success",message:n.message}),this.currentPage=1,this.getNewsChannelData()):(a.close(),this.$message({type:"error",message:n.message})),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](1),console.log(e.t0);case 16:case"end":return e.stop()}},e,this,[[1,13]])}));function t(t){return e.apply(this,arguments)}return t}(),getNewsColumn:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.api.getNewsColumn();case 3:t=e.sent,t.success?t.data.forEach(function(e){var t={value:e.uuid,label:e.fullName};a.stateOptions.push(t)}):this.$message({type:"error",message:t.message}),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),search:function(){this.currentPage=1,this.getNewsChannelData()},reset:function(){this.title="",this.author="",this.stateValue="",this.dateRange=[],this.search()},stateOptionsChange:function(){},editClick:function(e){this.resetForm("editForm"),this.isChangeRead=!1,this.isChangeShare=!1,this.isChangeLike=!1,this.isChangeWeight=!1,this.editDialog=!0,this.dialogTitle="修改",this.currentRow=e,this.editForm={readNum:e.readNumFake,shareNum:e.shareNumFake,likeNum:e.likeNumFake,weightNum:e.weightNum},this.editCompare={readNum:e.readNumFake,shareNum:e.shareNumFake,likeNum:e.likeNumFake,weightNum:e.weightNum}},readClick:function(){},resetForm:function(e){this.editDialog=!1,void 0!==this.$refs[e]&&this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.editDialog=!1,t.updateNumber(t.editForm)})},open_operationLog:function(e){this.operationLogModal=!0,this.operationlog_rowData=e,this.Operationlog_fromMark="manuscript"},operationLog_parentMethod:function(e){this.operationLogModal=e.operationLogModal}}},d=h,p=(a("9a82"),a("2877")),m=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=m.exports},"386d":function(e,t,a){"use strict";var r=a("cb7c"),n=a("83a1"),i=a("5f1b");a("214f")("search",1,function(e,t,a,o){return[function(a){var r=e(this),n=void 0==a?void 0:a[t];return void 0!==n?n.call(a,r):new RegExp(a)[t](String(r))},function(e){var t=o(a,e,this);if(t.done)return t.value;var s=r(e),l=String(this),u=s.lastIndex;n(u,0)||(s.lastIndex=0);var c=i(s,l);return n(s.lastIndex,u)||(s.lastIndex=u),null===c?-1:c.index}]})},"83a1":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"9a82":function(e,t,a){"use strict";var r=a("ca97"),n=a.n(r);n.a},ca97:function(e,t,a){}}]);