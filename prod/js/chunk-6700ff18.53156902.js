(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6700ff18"],{"240f":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.previewImgDialog,top:e.previewTopcss,"custom-class":"forScrollBar",title:"预览","append-to-body":""},on:{"update:visible":function(t){e.previewImgDialog=t},open:e.openPreviewFunc}},[a("div",{staticStyle:{height:"700px"}},[a("el-scrollbar",["video"==e.belong?[a("video",{staticStyle:{"min-height":"240px",height:"690px"},attrs:{width:"100%",src:e.dialogImageUrl,controls:""}},[e._v("\n                    您的浏览器不支持 video 标签。\n                ")])]:[a("div",{staticStyle:{height:"690px","text-align":"center"}},[a("img",{attrs:{height:"100%",src:e.dialogImageUrl,alt:""}})])]],2)],1)])},l=[],s={name:"previewModal",data:function(){return{previewImgDialog:!1,dialogImageUrl:"",previewTopcss:"6vh"}},props:["showDialog","belong","previewRow"],methods:{openPreviewFunc:function(){this.dialogImageUrl=this.previewRow}},mounted:function(){},watch:{showDialog:function(e){this.previewImgDialog=e},previewImgDialog:function(e){this.$emit("childEvent",{showDialog:e})}}},n=s,r=a("2877"),o=Object(r["a"])(n,i,l,!1,null,"150c48e8",null);t["a"]=o.exports},"24c0":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"complaint"},[a("el-container",[a("el-header",{staticStyle:{display:"flex","justify-content":"space-between"}},[a("div",{staticClass:"header-left"},[a("div",{staticClass:"input1"},[a("span",[e._v("标题")]),a("el-input",{attrs:{placeholder:"请输入标题"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchClick(t)}},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}})],1),a("div",{staticClass:"select2"},[a("span",[e._v("日期")]),a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd","unlink-panels":!0},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),a("div",{staticClass:"select1"},[a("span",{staticStyle:{width:"60px"}},[e._v("回复情况")]),a("el-select",{attrs:{placeholder:"全部"},on:{change:e.stateOptionsChange},model:{value:e.stateValue,callback:function(t){e.stateValue=t},expression:"stateValue"}},e._l(e.stateOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)]),a("div",{staticClass:"header-right globalSearchBtnBg"},[a("p",{staticClass:"search",on:{click:e.searchClick}},[e._v("检索")])])]),a("el-main",[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:""}},[a("el-table-column",{attrs:{label:"投诉人信息",width:"390"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex-row"},[a("div",{staticClass:"w50 mr-r1"},[a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("投诉单位:")]),a("div",{staticClass:"small-item-desc huan1",attrs:{title:t.row.companyName}},[e._v(e._s(t.row.companyName))])]),a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("手机:")]),a("div",{staticClass:"small-item-desc huan1",attrs:{title:t.row.phone}},[e._v(e._s(t.row.phone))])]),a("div",{staticClass:"small-item",staticStyle:{"margin-top":"90px"}},[a("span",{staticClass:"small-item-label"},[e._v("审核状态:")]),a("el-switch",{attrs:{value:1==t.row.show,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(a){return e.changeShowStatus(t.$index,t.row)}},nativeOn:{click:function(t){return e.stopBubble(t)}}})],1)]),a("div",{staticClass:"w50"},[a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("姓名:")]),a("div",{staticClass:"small-item-desc huan1",attrs:{title:t.row.userName}},[e._v(e._s(t.row.userName))])]),a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("时间:")]),a("div",{staticClass:"small-item-desc huan1",attrs:{title:t.row.complaintsTime}},[e._v(e._s(t.row.complaintsTime))])]),a("div",{staticStyle:{"margin-top":"90px"}},[a("button",{style:{display:0==t.row.replyStatus?"inline-block":"none"},on:{click:function(a){return e.replyClick(t.row)}}},[e._v("回复")]),a("button",{style:{display:1==t.row.replyStatus?"inline-block":"none"},on:{click:function(a){return e.replyClick(t.row)}}},[e._v("修改回复")]),a("button",{on:{click:function(a){return e.deleteClick(t.row)}}},[e._v("删除")])])])])]}}])}),a("el-table-column",{attrs:{label:"投诉信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("标题:")]),a("div",{staticClass:"small-item-desc"},[e._v(e._s(t.row.title))])]),a("div",{staticClass:"small-item"},[a("span",{staticClass:"small-item-label"},[e._v("正文:")]),a("div",{staticClass:"small-item-desc huan2"},[e._v(e._s(t.row.content))])]),a("div",{staticClass:"small-item"},[t.row.pictureUrl.length>0?a("div",[a("div",[a("viewer",{attrs:{images:t.row.pictureUrl}},e._l(t.row.pictureUrl,function(e,t){return a("img",{key:t,staticClass:"tdImgCls",attrs:{title:"点击预览",alt:"",src:e,height:"60",width:"60"}})}),0)],1)]):e._e(),t.row.videoUrl.length>0?a("div",[a("div",{staticClass:"wrapCls"},[a("div",{staticClass:"wrapHover"},[a("i",{staticClass:"el-icon-video-play",on:{click:function(a){return e.openpreviewModal(t.row.videoUrl[0],"video")}}})]),a("img",{attrs:{src:t.row.videoUrl[1],alt:""}})])]):e._e()])]}}])}),a("el-table-column",{attrs:{label:"回复情况",width:"490"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.replyStatus?a("div",{staticStyle:{color:"#21BE6F","text-align":"left"}},[e._v("已回复")]):a("div",{staticStyle:{color:"#E32519","text-align":"left"}},[e._v("未回复")]),1==t.row.replyStatus?a("div",{staticClass:"small-item"},[t.row.reply?a("div",{staticClass:"small-item-desc huan4"},[e._v(e._s(t.row.reply.replayContent||""))]):e._e()]):e._e()]}}])})],1)],a("div",[a("paging",{attrs:{total:e.pageTotal,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1),a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.replyDialog,"close-on-click-modal":!1},on:{"update:visible":function(t){e.replyDialog=t}}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:"请输入回复内容",maxlength:255,"show-word-limit":""},model:{value:e.replayContent,callback:function(t){e.replayContent=t},expression:"replayContent"}}),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{nativeOn:{click:function(t){e.replyDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return e.addReplyByComplaintsId(t)}}},[e._v("确 定")])],1)],1),a("preview-modal",{attrs:{showDialog:e.showDialog,previewRow:e.previewRow,belong:e.belong},on:{childEvent:e.previewModalMethod}})],1)},l=[],s=(a("28a5"),a("ac6a"),a("96cf"),a("3b8d")),n=a("240f"),r={name:"complaint",components:{previewModal:n["a"]},data:function(){return{title:"",stateValue:"",dateRange:[],stateOptions:[{value:"",label:"全部"},{value:"0",label:"未回复"},{value:"1",label:"已回复"}],loading:!1,currentPage:1,pageSize:3,pageTotal:0,tableData:[],dialogTitle:"回复",replyDialog:!1,replayContent:"",currentComplaintsId:"",previewRow:"",belong:"",showDialog:!1,rowReplyStatus:"",rowReplyId:""}},mounted:function(){this.selectInfoByParam()},watch:{currentPage:function(e,t){e&&this.selectInfoByParam()}},methods:{stopBubble:function(e){e.stopPropagation()},openpreviewModal:function(e,t){this.belong=t,this.previewRow=e,this.showDialog=!0},previewModalMethod:function(e){this.showDialog=e.showDialog},changeShowStatus:function(e,t){var a=this,i={titleStr:"",usedShow:""};1==t.show?(i.titleStr="确定要禁止此条投诉吗？",i.usedShow="0"):(i.titleStr="确定要展示此条投诉吗？",i.usedShow="1"),this.$confirm(i.titleStr,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function l(){var s;return regeneratorRuntime.wrap(function(l){while(1)switch(l.prev=l.next){case 0:return a.loading=!0,l.prev=1,l.next=4,a.api.updateComplaints({show:i.usedShow,id:t.id});case 4:s=l.sent,s.success?(a.tableData[e].show=i.usedShow,a.$message({type:"success",message:s.message}),a.loading=!1):(a.loading=!1,a.$message({type:"error",message:s.message})),l.next=11;break;case 8:l.prev=8,l.t0=l["catch"](1),console.log(l.t0);case 11:case"end":return l.stop()}},l,null,[[1,8]])}))).catch(function(){})},selectInfoByParam:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,t={replyStatus:this.stateValue,pageNo:this.currentPage,pageSize:this.pageSize,title:this.title,startDate:this.dateRange&&this.dateRange.length>0?this.dateRange[0]:"",endDate:this.dateRange&&this.dateRange.length>0?this.dateRange[1]:""},e.next=5,this.api.selectInfoByParam(t);case 5:a=e.sent,a.success?(this.loading=!1,this.pageTotal=a.total,a.data.length>0&&a.data.forEach(function(e){e.pictureUrl=""!==e.pictureUrl&&null!=e.pictureUrl?e.pictureUrl.split(","):[],e.videoUrl=""!==e.videoUrl&&null!=e.videoUrl?e.videoUrl.split(","):[]}),this.tableData=a.data):(this.tableData=[],this.pageTotal=0,this.loading=!1,this.$message({type:"error",message:a.message})),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log(e.t0);case 12:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),searchClick:function(){this.currentPage=1,this.selectInfoByParam()},stateOptionsChange:function(){},replyClick:function(e){this.rowReplyStatus=e.replyStatus,this.rowReplyId=e.reply?e.reply.id:"",1==e.replyStatus?(this.dialogTitle="修改回复",this.replayContent=e.reply.replayContent):(this.dialogTitle="回复",this.replayContent=""),this.replyDialog=!0,this.currentComplaintsId=e.id},addReplyByComplaintsId:function(){var e,t,a=this;if(""==this.replayContent)return this.$message({type:"error",message:"回复内容不能为空！"}),!1;this.loading=!0,1==this.rowReplyStatus?(e="complaint/updateComplaintsReply",t={id:this.rowReplyId,replayContent:this.replayContent,complaintsId:this.currentComplaintsId,replayUserId:""}):(e="complaint/addReplyByComplaintsId",t={replayContent:this.replayContent,complaintsId:this.currentComplaintsId,replayUserId:""}),this.api.crossPost(e,t).then(function(e){e.success?(a.loading=!1,a.replyDialog=!1,a.selectInfoByParam()):(a.loading=!1,a.$message({type:"error",message:e.message}))}).catch(function(e){console.error(e)})},deleteClick:function(e){var t=this;this.$confirm("您确定要删除此条投诉吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,t.api.deleteComplaints({id:e.id});case 4:i=a.sent,t.loading=!1,i.success?(t.selectInfoByParam(),t.$message({type:"success",message:i.message})):t.$message({type:"error",message:i.message}),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log(a.t0);case 12:case"end":return a.stop()}},a,null,[[1,9]])}))).catch(function(){})}}},o=r,c=(a("30e6"),a("2877")),u=Object(c["a"])(o,i,l,!1,null,null,null);t["default"]=u.exports},"28a5":function(e,t,a){"use strict";var i=a("aae3"),l=a("cb7c"),s=a("ebd6"),n=a("0390"),r=a("9def"),o=a("5f1b"),c=a("520a"),u=a("79e5"),p=Math.min,d=[].push,h="split",g="length",v="lastIndex",m=4294967295,w=!u(function(){RegExp(m,"y")});a("214f")("split",2,function(e,t,a,u){var f;return f="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[g]||2!="ab"[h](/(?:ab)*/)[g]||4!="."[h](/(.?)(.?)/)[g]||"."[h](/()()/)[g]>1||""[h](/.?/)[g]?function(e,t){var l=String(this);if(void 0===e&&0===t)return[];if(!i(e))return a.call(l,e,t);var s,n,r,o=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,h=void 0===t?m:t>>>0,w=new RegExp(e.source,u+"g");while(s=c.call(w,l)){if(n=w[v],n>p&&(o.push(l.slice(p,s.index)),s[g]>1&&s.index<l[g]&&d.apply(o,s.slice(1)),r=s[0][g],p=n,o[g]>=h))break;w[v]===s.index&&w[v]++}return p===l[g]?!r&&w.test("")||o.push(""):o.push(l.slice(p)),o[g]>h?o.slice(0,h):o}:"0"[h](void 0,0)[g]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,i){var l=e(this),s=void 0==a?void 0:a[t];return void 0!==s?s.call(a,l,i):f.call(String(l),a,i)},function(e,t){var i=u(f,e,this,t,f!==a);if(i.done)return i.value;var c=l(e),d=String(this),h=s(c,RegExp),g=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(w?"y":"g"),y=new h(w?c:"^(?:"+c.source+")",v),C=void 0===t?m:t>>>0;if(0===C)return[];if(0===d.length)return null===o(y,d)?[d]:[];var b=0,x=0,_=[];while(x<d.length){y.lastIndex=w?x:0;var k,S=o(y,w?d:d.slice(x));if(null===S||(k=p(r(y.lastIndex+(w?0:x)),d.length))===b)x=n(d,x,g);else{if(_.push(d.slice(b,x)),_.length===C)return _;for(var R=1;R<=S.length-1;R++)if(_.push(S[R]),_.length===C)return _;x=b=k}}return _.push(d.slice(b)),_}]})},"30e6":function(e,t,a){"use strict";var i=a("92e1"),l=a.n(i);l.a},"92e1":function(e,t,a){},aae3:function(e,t,a){var i=a("d3f4"),l=a("2d95"),s=a("2b4c")("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==l(e))}}}]);