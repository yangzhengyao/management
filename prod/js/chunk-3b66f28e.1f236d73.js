(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b66f28e"],{1247:function(e,t,a){"use strict";var r=a("3582"),i=a.n(r);i.a},"2d34":function(e,t,a){"use strict";(function(e){a("8e6e"),a("ac6a"),a("456d"),a("96cf");var r=a("3b8d"),i=(a("7f7f"),a("bd86")),n=a("2f62"),o=a("e5de"),s=a("f670");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach(function(t){Object(i["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}t["a"]={name:"user",components:{operationLog:o["a"],deleteHistoryLog:s["a"]},data:function(){return{imageurl:"",sendImageUrl:"",uploadList:[],form:{modal_nickName:""},rules:{modal_nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}]},options:[{value:"选项1",label:"黄金糕"},{value:"选项2",label:"双皮奶"},{value:"选项3",label:"蚵仔煎"},{value:"选项4",label:"龙须面"},{value:"选项5",label:"北京烤鸭"}],nickName:"",phoneNumber:"",value1:"",tableData:[],checked:!1,state:!0,radio:"2",loading:!1,currentPage:1,pageSize:10,total:10,showEditDialog:!1,currentData:"",defaultImg:"http://hongqi.wengegroup.com:8888/group1/M00/00/11/wKgBe12Jk1SAZX1lAAANEPuKHRA650.png",commonUploadUrl:this.api.getHongqiUploadUrl(),operationLogModal:!1,operationlog_rowData:"",Operationlog_fromMark:"",deleteHistoryLogModal:!1,deleteHistoryRow:"",fromPage:""}},computed:c({},Object(n["b"])(["appId"])),methods:{handleAvatarSuccess:function(e,t,a){e.success&&(this.sendImageUrl=e.data[0],t.url=e.data[0]),this.uploadList=a},beforeAvatarUpload:function(e){var t=/\.(jpg|jpeg|png|bmp|BMP|JPG|PNG|JPEG|GIF|gif)$/,a=e.name.lastIndexOf("."),r=e.name.slice(a),i=t.test(r);return i||this.$message.error("上传头像图片只能是 JPG、PNG 等图片格式!"),i},handleExceed:function(e,t){this.$message.warning("上传头像限制选择 1 个文件，请删除后再上传")},handleRemove:function(e){var t=this.uploadList;this.uploadList.splice(t.indexOf(e),1)},handleChange:function(e,t){this.uploadList=t},openFunc:function(){this.uploadList=[],this.sendImageUrl="",this.form.modal_nickName=this.currentData.personName;var e=[];e=this.currentData.imgurl?[{name:"",url:this.currentData.imgurl,status:"success"}]:[],this.uploadList=e},editModalOpenedFunc:function(){this.uploadList.length>0?e(".avatorUpload").hide():e(".avatorUpload").show()},initNick:function(){this.form.modal_nickName=(this.currentData.personName?this.currentData.personName:"")+(this.currentData.autoId?this.currentData.autoId:"")},initAvator:function(){this.uploadList=[{name:"",url:this.defaultImg,status:"success"}],this.sendImageUrl=this.defaultImg},stopBubble:function(){event.stopPropagation()},parseThirdbinding:function(e){switch(e.type){case 0:return"手机用户";case 1:return"qq";default:return""}},saveFunc:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t={autoId:this.currentData.autoId,personName:this.form.modal_nickName,imgurl:this.sendImageUrl},e.next=4,this.api.updateBanned(t);case 4:a=e.sent,a.success?(this.showEditDialog=!1,this.queryList(),this.$message({type:"success",message:a.message})):this.$message({type:"error",message:a.message}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e,t){var a=this;this.$refs[t].validate(function(e){if(!e)return a.$message({message:"校验失败",type:"warning"}),!1;a.saveFunc()})},editUser:function(e){this.currentData=e,this.showEditDialog=!0},deleteUser:function(e){var t=this;this.$confirm("确定删除此用户吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return t.loading=!0,a.prev=1,a.next=4,t.api.banned({userStatus:"2",autoId:e.autoId});case 4:r=a.sent,r.success?(t.queryList(),t.$message({type:"success",message:"操作成功!"})):(t.loading=!1,t.$message({type:"error",message:"操作失败!"})),a.next=11;break;case 8:a.prev=8,a.t0=a["catch"](1),console.log(a.t0);case 11:case"end":return a.stop()}},a,null,[[1,8]])}))).catch(function(){})},openForbid:function(e,t){var a=this,i={titleStr:"",usedstatus:""};1==t.userStatus?(i.titleStr="确定要开放此用户吗？",i.usedstatus="0"):(i.titleStr="确定要禁言此用户吗？",i.usedstatus="1"),this.$confirm(i.titleStr,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a.loading=!0,e.prev=1,e.next=4,a.api.updateBanned({userStatus:i.usedstatus,autoId:t.autoId});case 4:r=e.sent,r.success?(a.queryList(),a.$message({type:"success",message:"操作成功!"})):(a.loading=!1,a.$message({type:"error",message:"操作失败!"})),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}))).catch(function(){})},queryList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,"initPage"==t&&(this.currentPage=1),e.prev=2,e.next=5,this.api.queryUser({pageNo:this.currentPage,pageSize:this.pageSize,personName:this.nickName.trim(),mobile:this.phoneNumber});case 5:a=e.sent,this.loading=!1,this.tableData=a.data,this.total=a.total,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),console.log(e.t0);case 14:case"end":return e.stop()}},e,this,[[2,11]])}));function t(t){return e.apply(this,arguments)}return t}(),open_operationLog:function(e){this.operationLogModal=!0,this.operationlog_rowData=e,this.Operationlog_fromMark="user"},operationLog_parentMethod:function(e){this.operationLogModal=e.operationLogModal},openDeleteHistory:function(e){this.deleteHistoryLogModal=!0,this.deleteHistoryRow=e,this.fromPage="user"},deleteHistoryLog_parentMethod:function(e){this.deleteHistoryLogModal=e.deleteHistoryLogModal},sycncRefresh_parentMethod:function(){this.queryList("initPage")}},mounted:function(){this.queryList()},watch:{currentPage:function(e,t){e&&this.queryList()},uploadList:function(t){t.length>0?e(".avatorUpload").hide():e(".avatorUpload").show()}}}}).call(this,a("1157"))},3582:function(e,t,a){},4758:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-container",[a("el-header",[a("div",{staticClass:"header1"},[a("span",[e._v("昵称")]),a("el-input",{staticClass:"userName",attrs:{placeholder:"请输入昵称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList("initPage")}},model:{value:e.nickName,callback:function(t){e.nickName=t},expression:"nickName"}})],1),a("div",{staticClass:"header3"},[a("span",[e._v("手机号")]),a("el-input",{staticClass:"phone",attrs:{placeholder:"请输入手机号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryList("initPage")}},model:{value:e.phoneNumber,callback:function(t){e.phoneNumber="string"===typeof t?t.trim():t},expression:"phoneNumber"}})],1),a("div",{staticClass:"header6"},[a("p",{staticClass:"globalHistoryDeleteBtnBg",staticStyle:{"margin-right":"20px"},on:{click:e.openDeleteHistory}},[e._v("删除历史")]),a("p",{staticClass:"search globalSearchBtnBg",on:{click:function(t){return e.queryList("initPage")}}},[e._v("检索")])])]),a("el-main",[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"userTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:"",id:"useTableId"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"personName",label:"昵称","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"头像"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"30px",height:"30px","margin-top":"6px"},attrs:{src:e.row.imgurl,fit:"cover"}},[a("div",{staticClass:"image-slot",staticStyle:{"margin-top":"5px"},attrs:{slot:"error"},slot:"error"},[a("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"24px"}})])])]}}])}),a("el-table-column",{attrs:{prop:"mobile",label:"手机号"}}),a("el-table-column",{attrs:{label:"第三方绑定","class-name":"thirdBindingCls"},scopedSlots:e._u([{key:"default",fn:function(t){return[null==t.row.types||""===t.row.types?a("i",{staticClass:"iconfont iconqita",attrs:{title:"其他"}}):e._e(),t.row.types&&t.row.types.indexOf("0")>0?a("i",{staticClass:"iconfont iconshouji"}):e._e(),t.row.types&&t.row.types.indexOf("1")>0?a("i",{staticClass:"iconfont iconosm-qq"}):e._e(),t.row.types&&t.row.types.indexOf("2")>0?a("i",{staticClass:"iconfont iconosm-weixin"}):e._e(),t.row.types&&t.row.types.indexOf("3")>0?a("i",{staticClass:"iconfont iconosm-weibo"}):e._e()]}}])}),a("el-table-column",{attrs:{prop:"insertTime",label:"注册时间"}}),a("el-table-column",{attrs:{label:"禁言状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{attrs:{value:1==t.row.userStatus,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(a){return e.openForbid(t.$index,t.row)}},nativeOn:{click:function(t){return e.stopBubble(t)}}})]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("button",{on:{click:function(a){return e.editUser(t.row)}}},[e._v("修改")]),a("button",{staticClass:"deleteCls",on:{click:function(a){return e.deleteUser(t.row)}}},[e._v("删除")]),a("button",{staticClass:"logBtnCls",on:{click:function(a){return e.open_operationLog(t.row)}}},[e._v("日志")])]}}])})],1)],a("div",[a("paging",{attrs:{total:e.total,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1),a("el-dialog",{attrs:{title:"修改",visible:e.showEditDialog,"custom-class":"edituserCls",width:"600px"},on:{"update:visible":function(t){e.showEditDialog=t},opened:e.editModalOpenedFunc,open:e.openFunc}},[a("el-form",{ref:"ruleForm",staticClass:"editUserForm",attrs:{model:e.form,rules:e.rules,"label-width":"60px","label-position":"right"}},[a("el-form-item",{attrs:{label:"昵称:",prop:"modal_nickName"}},[a("el-input",{staticStyle:{width:"calc(100% - 100px)"},model:{value:e.form.modal_nickName,callback:function(t){e.$set(e.form,"modal_nickName",t)},expression:"form.modal_nickName"}}),a("span",{staticClass:"initBtn",on:{click:e.initNick}},[e._v("初始化")])],1),a("el-form-item",{staticClass:"avatorForm",attrs:{label:"头像:"}},[e._l(e.uploadList,function(t,r){return a("div",{key:r,staticClass:"demo-upload-list"},["success"===t.status?[a("img",{attrs:{src:t.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"20px"},on:{click:function(a){return e.handleRemove(t)}}})])]:[a("el-progress",{staticStyle:{"line-height":"108px"},attrs:{"text-inside":!0,"stroke-width":24,percentage:t.percentage,status:"success"}})]],2)}),a("el-upload",{staticClass:"avatorUpload",attrs:{name:"file",action:e.commonUploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-change":e.handleChange,"before-upload":e.beforeAvatarUpload,"on-exceed":e.handleExceed,limit:1,"file-list":e.uploadList}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticClass:"initBtn",staticStyle:{"margin-top":"90px"},on:{click:e.initAvator}},[e._v("初始化")])],2)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showEditDialog=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("all","ruleForm")}}},[e._v("确 定")])],1)],1),a("operationLog",{attrs:{operationLogModal:e.operationLogModal,operationlog_rowData:e.operationlog_rowData,Operationlog_fromMark:e.Operationlog_fromMark},on:{operationlog_childEvent:e.operationLog_parentMethod}}),a("deleteHistoryLog",{attrs:{deleteHistoryLogModal:e.deleteHistoryLogModal,deleteHistoryRow:e.deleteHistoryRow,fromPage:e.fromPage},on:{deleteHistoryLog_childEvent:e.deleteHistoryLog_parentMethod,sycncRefresh_childEvent:e.sycncRefresh_parentMethod}})],1)},i=[],n=a("2d34"),o=n["a"],s=(a("1247"),a("2877")),l=Object(s["a"])(o,r,i,!1,null,null,null);t["default"]=l.exports},6318:function(e,t,a){"use strict";var r=a("6f2a"),i=a.n(r);i.a},"6f2a":function(e,t,a){},"7f7f":function(e,t,a){var r=a("86cc").f,i=Function.prototype,n=/^\s*function ([^ (]*)/,o="name";o in i||a("9e1e")&&r(i,o,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(e){return""}}})},f670:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"删除历史","custom-class":"commonHeader deleteHistoryLogModalCls",top:e.deleteHistoryLogTopCss,visible:e.currentDeleteHistoryLogModal},on:{open:e.openModalFunc,"update:visible":function(t){e.currentDeleteHistoryLogModal=t}}},[a("div",{staticStyle:{height:"500px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.deleteHistoryLogLoading,expression:"deleteHistoryLogLoading"}],attrs:{data:e.deleteHistoryLogTableData,stripe:"",border:"","max-height":"500"}},[e._l(e.deleteTitleData,function(e,t){return[a("el-table-column",{key:t,attrs:{"show-overflow-tooltip":!0,property:e.property,label:e.label}})]}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"3px 6px"},attrs:{size:"mini",type:"primary",round:"",loading:t.row.btnLoading},nativeOn:{click:function(a){return e.undeleteAdvert(t.row,t.$index)}}},[e._v("恢复\n                    ")])]}}])})],2)],1),a("div",{staticStyle:{"padding-top":"20px",height:"36px"}},[a("detailPaging",{attrs:{total:e.detailPageTotal,detailCurrentPage:e.detailCurrentPage,pageSize:e.detailPageSize},on:{"update:detailCurrentPage":function(t){e.detailCurrentPage=t},"update:detail-current-page":function(t){e.detailCurrentPage=t}}})],1)])},i=[],n=(a("ac6a"),a("96cf"),a("3b8d")),o=a("9d43"),s={name:"deleteHistoryLogModal",data:function(){return{currentDeleteHistoryLogModal:!1,deleteHistoryLogTableData:[],deleteHistoryLogLoading:!1,detailPageTotal:0,detailCurrentPage:1,detailPageSize:10,pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},deleteHistoryLogTopCss:"10vh",deleteTitleData:[],columnData:{ad:[{label:"广告说明",property:"advertName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],subscription:[{label:"名称",property:"subscribeName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],circle:[{label:"名称",property:"themeName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"userName"}],topic:[{label:"名称",property:"topicName"},{label:"删除时间",property:"addTime"},{label:"操作人",property:"username"}],user:[{label:"昵称",property:"nickName"},{label:"删除时间",property:"delTime"},{label:"操作人",property:"userName"}]}}},props:["deleteHistoryLogModal","deleteHistoryRow","fromPage"],components:{detailPaging:o["a"]},methods:{openModalFunc:function(){this.fromPage&&(this.deleteTitleData=this.columnData[this.fromPage]),this.detailCurrentPage=1,this.queryTableData()},queryTableData:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.deleteHistoryLogLoading=!0,e.prev=1,a={pageNo:this.detailCurrentPage,pageSize:this.detailPageSize},"ad"!=this.fromPage){e.next=9;break}return e.next=6,this.api.queryHistoryDeleteLog(a);case 6:t=e.sent,e.next=31;break;case 9:if("subscription"!=this.fromPage){e.next=15;break}return e.next=12,this.api.queryHistoryDeleteLog_subscription(a);case 12:t=e.sent,e.next=31;break;case 15:if("circle"!=this.fromPage){e.next=21;break}return e.next=18,this.api.queryHistoryDeleteLog_circle(a);case 18:t=e.sent,e.next=31;break;case 21:if("topic"!=this.fromPage){e.next=27;break}return e.next=24,this.api.queryHistoryDeleteLog_topic(a);case 24:t=e.sent,e.next=31;break;case 27:if("user"!=this.fromPage){e.next=31;break}return e.next=30,this.api.queryHistoryDeleteLog_user(a);case 30:t=e.sent;case 31:t.success?(this.deleteHistoryLogLoading=!1,t.data.length>0?(t.data.forEach(function(e,t){e.btnLoading=!1}),this.deleteHistoryLogTableData=t.data,this.detailPageTotal=t.total):(this.deleteHistoryLogTableData=[],this.detailPageTotal=0)):(this.deleteHistoryLogTableData=[],this.deleteHistoryLogLoading=!1,this.$message({type:"error",message:t.message,duration:1e3})),e.next=37;break;case 34:e.prev=34,e.t0=e["catch"](1),console.log(e.t0);case 37:case"end":return e.stop()}},e,this,[[1,34]])}));function t(){return e.apply(this,arguments)}return t}(),undeleteRequest:function(){this.$emit("sycncRefresh_childEvent",{})},undeleteAdvert:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,a){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.deleteHistoryLogTableData[a].btnLoading=!0,e.prev=1,"ad"!=this.fromPage){e.next=9;break}return r={advertId:t.pid},e.next=6,this.api.undeleteAd(r);case 6:i=e.sent,e.next=35;break;case 9:if("subscription"!=this.fromPage){e.next=16;break}return r={pid:t.pid},e.next=13,this.api.undelete_subscription(r);case 13:i=e.sent,e.next=35;break;case 16:if("circle"!=this.fromPage){e.next=23;break}return r={themeId:t.themeId},e.next=20,this.api.undelete_circle(r);case 20:i=e.sent,e.next=35;break;case 23:if("topic"!=this.fromPage){e.next=30;break}return r={topicId:t.pid},e.next=27,this.api.undelete_topic(r);case 27:i=e.sent,e.next=35;break;case 30:if("user"!=this.fromPage){e.next=35;break}return r={delUserId:t.delUserId},e.next=34,this.api.undelete_user(r);case 34:i=e.sent;case 35:this.deleteHistoryLogTableData[a].btnLoading=!1,i.success?(this.undeleteRequest(),this.queryTableData(),this.$message({type:"success",message:i.message,duration:1e3})):this.$message({type:"error",message:i.message,duration:1e3}),e.next=42;break;case 39:e.prev=39,e.t0=e["catch"](1),console.log(e.t0);case 42:case"end":return e.stop()}},e,this,[[1,39]])}));function t(t,a){return e.apply(this,arguments)}return t}()},mounted:function(){},watch:{deleteHistoryLogModal:function(e){this.currentDeleteHistoryLogModal=e},currentDeleteHistoryLogModal:function(e){this.$emit("deleteHistoryLog_childEvent",{deleteHistoryLogModal:e})},detailCurrentPage:function(e,t){e&&this.queryTableData()}}},l=s,c=(a("6318"),a("2877")),u=Object(c["a"])(l,r,i,!1,null,null,null);t["a"]=u.exports}}]);