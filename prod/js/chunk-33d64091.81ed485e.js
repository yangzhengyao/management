(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33d64091"],{"0bdc":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"active"},[i("el-container",[i("el-header",[i("div",{staticClass:"header1"},[i("span",{staticStyle:{"margin-right":"10px"}},[e._v("状态")]),i("el-select",{attrs:{placeholder:"全部"},on:{change:e.stateOptionsChange},model:{value:e.stateValue,callback:function(t){e.stateValue=t},expression:"stateValue"}},e._l(e.stateOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),i("div",{staticClass:"header6 globalSearchBtnBg"},[i("p",{staticClass:"search",on:{click:e.createActive}},[e._v("新建活动")])])]),i("el-main",[[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:"","max-height":"670",border:""}},[i("el-table-column",{attrs:{label:"序号",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(t.$index+1+(e.currentPage-1)*e.pageSize)+"\n\t\t\t\t\t\t")]}}])}),i("el-table-column",{attrs:{label:"开始时间",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(t.row.startTime)+"-"),i("br"),e._v(e._s(t.row.endTime)+"\n\t\t\t\t\t\t")]}}])}),i("el-table-column",{attrs:{prop:"name",label:"活动名称",width:"300","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"signUpEndTime",label:"报名截止时间",width:"170"}}),i("el-table-column",{attrs:{prop:"perCost",label:"费用"}}),i("el-table-column",{attrs:{label:"人数"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t"+e._s(t.row.singUpNum)+"/"+e._s(t.row.singUpCeiling)+"\n\t\t\t\t\t\t\t"),i("span",[e._v("查看")])]}}])}),i("el-table-column",{attrs:{prop:"activitiesZone",label:"地点","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"titlePicUrl",label:"活动配图"},scopedSlots:e._u([{key:"default",fn:function(e){return[i("img",{staticStyle:{width:"80px",height:"30px",border:"1px solid #B3B3B3"},attrs:{src:e.row.titlePicUrl,alt:""}})]}}])}),i("el-table-column",{attrs:{prop:"signUpStatus",label:"报名状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(1==t.row.signUpStatus?"报名中":"已结束"))])]}}])}),i("el-table-column",{attrs:{prop:"status",label:"开放状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{value:0==t.row.status,"active-color":"#CAA267","inactive-color":"#FFFFFF"},on:{change:function(i){return e.changeStatus(t.$index,t.row)}}})]}}])}),i("el-table-column",{attrs:{prop:"operation",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("button",{on:{click:function(i){return e.editClick(t.row)}}},[e._v("修改")]),i("button",{on:{click:function(i){return e.deleteClick(t.row)}}},[e._v("删除")])]}}])})],1)],i("div",[i("paging",{attrs:{total:e.pageTotal,currentPage:e.currentPage,pageSize:e.pageSize},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],2)],1),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.createDialog},on:{"update:visible":function(t){e.createDialog=t}}},[i("el-form",{ref:"createForm",attrs:{model:e.createForm,rules:e.createRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[i("el-input",{staticStyle:{width:"54%"},attrs:{autocomplete:"off"},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1),i("el-form-item",{attrs:{label:"活动配图",prop:"titlePicUrl"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.commonUploadUrl,"show-file-list":!1,"on-success":e.handleSuccess,"before-upload":e.beforeUpload}},[e.createForm.titlePicUrl?i("img",{staticClass:"avatar",attrs:{src:e.createForm.titlePicUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{label:"活动类型",prop:"activitiesType"}},[i("el-select",{staticStyle:{width:"54%"},attrs:{placeholder:"请选择活动类型"},on:{change:e.dialogOptionsChange},model:{value:e.createForm.activitiesType,callback:function(t){e.$set(e.createForm,"activitiesType",t)},expression:"createForm.activitiesType"}},e._l(e.dialogOptions,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"活动时间",required:""}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"activitiesTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"活动时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.createForm.activitiesTime,callback:function(t){e.$set(e.createForm,"activitiesTime",t)},expression:"createForm.activitiesTime"}})],1)],1)],1),i("el-form-item",{attrs:{label:"活动起始时间",required:""}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"startTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"开始时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptionsStart},on:{change:e.dateChangeBeginTime},model:{value:e.createForm.startTime,callback:function(t){e.$set(e.createForm,"startTime",t)},expression:"createForm.startTime"}})],1)],1),i("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("-")]),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{prop:"endTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"结束时间",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptionsEnd},on:{change:e.dateChangeEndTime},model:{value:e.createForm.endTime,callback:function(t){e.$set(e.createForm,"endTime",t)},expression:"createForm.endTime"}})],1)],1)],1),i("el-form-item",{attrs:{label:"报名截止时间",prop:"signUpEndTime"}},[i("el-date-picker",{staticStyle:{width:"25%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"报名截止时间"},model:{value:e.createForm.signUpEndTime,callback:function(t){e.$set(e.createForm,"signUpEndTime",t)},expression:"createForm.signUpEndTime"}})],1),i("el-form-item",{attrs:{label:"费用",prop:"perCost"}},[i("el-input",{staticStyle:{width:"25%"},attrs:{autocomplete:"off"},model:{value:e.createForm.perCost,callback:function(t){e.$set(e.createForm,"perCost",e._n(t))},expression:"createForm.perCost"}})],1),i("el-form-item",{attrs:{label:"地点",prop:"activitiesZone"}},[i("el-input",{staticStyle:{width:"54%"},attrs:{autocomplete:"off"},model:{value:e.createForm.activitiesZone,callback:function(t){e.$set(e.createForm,"activitiesZone",t)},expression:"createForm.activitiesZone"}})],1),i("el-form-item",{attrs:{label:"人数",prop:"singUpCeiling"}},[i("el-input",{staticStyle:{width:"25%"},attrs:{autocomplete:"off"},model:{value:e.createForm.singUpCeiling,callback:function(t){e.$set(e.createForm,"singUpCeiling",e._n(t))},expression:"createForm.singUpCeiling"}})],1),i("el-form-item",{attrs:{label:"活动介绍",prop:"content"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},placeholder:"请输入内容"},model:{value:e.createForm.content,callback:function(t){e.$set(e.createForm,"content",t)},expression:"createForm.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){return e.resetForm("createForm")}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("createForm")}}},[e._v("确 定")])],1)],1)],1)},r=[],s=(i("28a5"),i("7f7f"),i("96cf"),i("3b8d")),n={name:"active",components:{},data:function(){var e=this;return{pickerOptionsStart:{disabledDate:function(t){if(e.createForm.endTime)return t.getTime()>new Date(e.createForm.endTime).getTime()}},pickerOptionsEnd:{disabledDate:function(t){if(e.createForm.startTime)return t.getTime()<new Date(e.createForm.startTime).getTime()}},loading:!1,stateOptions:[{value:"",label:"全部"},{value:"1",label:"报名中"},{value:"0",label:"已结束"}],dialogOptions:[{value:"1",label:"志愿者活动"},{value:"2",label:"主持人评选活动"},{value:"3",label:"招工活动"}],stateValue:"",dialogTitle:"新建活动",currentPage:1,pageSize:10,pageTotal:0,tableData:[],createDialog:!1,createForm:{name:"",titlePicUrl:"",activitiesType:"",activitiesTime:"",startTime:"",endTime:"",signUpEndTime:"",perCost:"",activitiesZone:"",singUpCeiling:"",content:""},currentRow:{},createRules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:1,max:10,message:"长度最多 10 个字符",trigger:"blur"}],titlePicUrl:[{required:!0,message:"请选择活动配图",trigger:"change"}],activitiesType:[{required:!0,message:"请选择活动类型",trigger:"change"}],activitiesTime:[{type:"string",required:!0,message:"请选择活动时间",trigger:"change"}],startTime:[{type:"string",required:!0,message:"请选择开始时间",trigger:"change"}],endTime:[{type:"string",required:!0,message:"请选择结束时间",trigger:"change"}],signUpEndTime:[{type:"string",required:!0,message:"请选择报名截至时间",trigger:"change"}],perCost:[{required:!0,type:"number",min:0,message:"请输入不小于0的费用",trigger:"blur"}],activitiesZone:[{required:!0,message:"请输入地点",trigger:"blur"}],singUpCeiling:[{required:!0,type:"number",min:0,message:"请输入不小于0人数",trigger:"blur"}],content:[{required:!0,message:"请填写活动内容",trigger:"blur"}]},commonUploadUrl:this.api.getHongqiUploadUrl()}},mounted:function(){this.queryActivities()},watch:{currentPage:function(e,t){e&&this.queryActivities()}},methods:{queryActivities:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,t={pageNo:this.currentPage,pageSize:this.pageSize},""!==this.stateValue&&(t.signUpIsEnd=this.stateValue),e.next=6,this.api.queryActivities(t);case 6:i=e.sent,i.success?(this.loading=!1,this.pageTotal=i.total,this.tableData=i.data):(this.loading=!1,this.$message({type:"error",message:i.message})),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log(e.t0);case 13:case"end":return e.stop()}},e,this,[[1,10]])}));function t(){return e.apply(this,arguments)}return t}(),addActivities:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,e.prev=1,t={name:this.createForm.name,titlePicUrl:this.createForm.titlePicUrl,activitiesType:this.createForm.activitiesType,activitiesTime:this.createForm.activitiesTime,startTime:this.createForm.startTime,endTime:this.createForm.endTime,signUpEndTime:this.createForm.signUpEndTime,perCost:this.createForm.perCost,activitiesZone:this.createForm.activitiesZone,singUpCeiling:this.createForm.singUpCeiling,content:this.createForm.content},i=null,"修改活动"!=this.dialogTitle){e.next=11;break}return t.id=this.createForm.id,e.next=8,this.api.updateActivities(t);case 8:i=e.sent,e.next=14;break;case 11:return e.next=13,this.api.addActivities(t);case 13:i=e.sent;case 14:i.success?(a=this,setTimeout(function(){a.loading=!1,a.$message({type:"success",message:i.message}),a.currentPage=1,a.queryActivities()},1500)):(this.loading=!1,this.$message({type:"error",message:i.message})),e.next=20;break;case 17:e.prev=17,e.t0=e["catch"](1),console.log(e.t0);case 20:case"end":return e.stop()}},e,this,[[1,17]])}));function t(){return e.apply(this,arguments)}return t}(),stateOptionsChange:function(e){this.stateValue=e,this.currentPage=1,this.queryActivities()},dialogOptionsChange:function(e){this.createForm.activitiesType=e},changeStatus:function(e,t){var i=this;if(0==t.status){var a=t;this.$confirm("确定要禁止此条开放状态吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,a.status=1,t.next=4,i.api.updateActivities(a);case 4:r=t.sent,r.success?(i.tableData[e].status=1,i.$message({type:"success",message:"操作成功!"})):i.$message({type:"error",message:"操作失败!"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))).catch(function(){})}else{var r=t;this.$confirm("确定要打开此条的开放状态吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r.status=0,t.next=4,i.api.updateActivities(r);case 4:a=t.sent,a.success?(i.tableData[e].status=0,i.$message({type:"success",message:"操作成功!"})):i.$message({type:"error",message:"操作失败!"}),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}},t,null,[[0,8]])}))).catch(function(){})}},editClick:function(e){this.createDialog=!0,this.dialogTitle="修改活动",this.currentRow=this.commonFunc.deepClone(e),this.createForm=this.currentRow},deleteClick:function(e){var t=this;this.$confirm("确定要删除吗？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function i(){var a,r;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return t.loading=!0,i.prev=1,i.next=4,t.api.deleteActivities({id:e.id});case 4:a=i.sent,a.success?(r=t,setTimeout(function(){r.loading=!1,r.$message({type:"success",message:a.message}),r.currentPage=1,r.queryActivities()},1500)):t.$message({type:"error",message:a.message}),i.next=11;break;case 8:i.prev=8,i.t0=i["catch"](1),console.log(i.t0);case 11:case"end":return i.stop()}},i,null,[[1,8]])}))).catch(function(){})},createActive:function(e){this.resetForm("createForm"),this.createDialog=!0,this.dialogTitle="新建活动"},handleSuccess:function(e,t){this.createForm.titlePicUrl=e.data[0]},beforeUpload:function(e){var t="image"==e.type.split("/")[0],i=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),i||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&i},resetForm:function(e){this.createDialog=!1,void 0!==this.$refs[e]&&this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.createForm),t.createDialog=!1,t.addActivities()})},dateChangeBeginTime:function(e){this.createForm.startTime=e},dateChangeEndTime:function(e){this.createForm.endTime=e}}},o=n,c=(i("282e"),i("2877")),l=Object(c["a"])(o,a,r,!1,null,null,null);t["default"]=l.exports},"282e":function(e,t,i){"use strict";var a=i("c550"),r=i.n(a);r.a},"28a5":function(e,t,i){"use strict";var a=i("aae3"),r=i("cb7c"),s=i("ebd6"),n=i("0390"),o=i("9def"),c=i("5f1b"),l=i("520a"),u=i("79e5"),m=Math.min,p=[].push,d="split",g="length",h="lastIndex",f=4294967295,v=!u(function(){RegExp(f,"y")});i("214f")("split",2,function(e,t,i,u){var b;return b="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[g]||2!="ab"[d](/(?:ab)*/)[g]||4!="."[d](/(.?)(.?)/)[g]||"."[d](/()()/)[g]>1||""[d](/.?/)[g]?function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(r,e,t);var s,n,o,c=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,d=void 0===t?f:t>>>0,v=new RegExp(e.source,u+"g");while(s=l.call(v,r)){if(n=v[h],n>m&&(c.push(r.slice(m,s.index)),s[g]>1&&s.index<r[g]&&p.apply(c,s.slice(1)),o=s[0][g],m=n,c[g]>=d))break;v[h]===s.index&&v[h]++}return m===r[g]?!o&&v.test("")||c.push(""):c.push(r.slice(m)),c[g]>d?c.slice(0,d):c}:"0"[d](void 0,0)[g]?function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)}:i,[function(i,a){var r=e(this),s=void 0==i?void 0:i[t];return void 0!==s?s.call(i,r,a):b.call(String(r),i,a)},function(e,t){var a=u(b,e,this,t,b!==i);if(a.done)return a.value;var l=r(e),p=String(this),d=s(l,RegExp),g=l.unicode,h=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),y=new d(v?l:"^(?:"+l.source+")",h),F=void 0===t?f:t>>>0;if(0===F)return[];if(0===p.length)return null===c(y,p)?[p]:[];var T=0,w=0,x=[];while(w<p.length){y.lastIndex=v?w:0;var k,C=c(y,v?p:p.slice(w));if(null===C||(k=m(o(y.lastIndex+(v?0:w)),p.length))===T)w=n(p,w,g);else{if(x.push(p.slice(T,w)),x.length===F)return x;for(var U=1;U<=C.length-1;U++)if(x.push(C[U]),x.length===F)return x;w=T=k}}return x.push(p.slice(T)),x}]})},"7f7f":function(e,t,i){var a=i("86cc").f,r=Function.prototype,s=/^\s*function ([^ (]*)/,n="name";n in r||i("9e1e")&&a(r,n,{configurable:!0,get:function(){try{return(""+this).match(s)[1]}catch(e){return""}}})},aae3:function(e,t,i){var a=i("d3f4"),r=i("2d95"),s=i("2b4c")("match");e.exports=function(e){var t;return a(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},c550:function(e,t,i){}}]);